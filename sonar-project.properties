# =============================================================================
# SonarCloud Project Configuration
# =============================================================================
# MSP (Managed Service Provider) optimized settings
# =============================================================================

# Project Identification
sonar.projectKey=Kafkasportal_Portal-main-main
sonar.organization=kafkasportal
sonar.projectName=Portal-main-main
sonar.projectVersion=0.1.0

# SonarCloud Server Configuration
sonar.host.url=https://sonarcloud.io

# Source Configuration
sonar.sources=src
sonar.tests=src
sonar.inclusions=**/*.ts,**/*.tsx,**/*.js,**/*.jsx
sonar.exclusions=**/*.config.js,**/*.config.ts,**/node_modules/**,**/.next/**,**/out/**,**/coverage/**,**/dist/**,**/build/**,**/types/**/*.d.ts

# Test Configuration
sonar.test.inclusions=**/*.test.ts,**/*.spec.ts,**/*.test.tsx,**/*.spec.tsx
sonar.coverage.exclusions=**/*.test.ts,**/*.spec.ts,**/*.stories.tsx,**/*.d.ts,**/*.config.ts,**/*.config.js

# TypeScript Configuration
sonar.typescript.tsconfigPath=tsconfig.json
sonar.javascript.lcov.reportPaths=coverage/lcov.info

# Language-Specific Settings
sonar.javascript.environments=es2022,node,browser
sonar.typescript.node=20

# Quality and Security
sonar.qualitygate.wait=true
sonar.scanner.forceZeroError=true

# Reporting
sonar.eslint.reportPaths=eslint-report.json
sonar.pmd.reportPaths=pmd-report.xml

# Security Rules (MSP Compliance)
sonar.security.hotspots.enabled=true
sonar.security.vulnerabilities.enabled=true

# =============================================================================
# Code Duplication (CPD) Configuration
# =============================================================================
# Exclude patterns that legitimately have similar code structures:
# - UI components (shadcn/ui): Generated components with similar patterns
# - Test files: Similar test setup and assertions
# - Stories files: Similar story configurations
# - Type definitions: Similar type structures
# - API hooks: Similar query/mutation patterns
# - Form components: Similar form field patterns
sonar.cpd.exclusions=\
  **/*.stories.tsx,\
  **/*.spec.ts,\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/*.spec.tsx,\
  **/components/ui/**,\
  **/types/**,\
  **/__tests__/**,\
  **/test/**,\
  **/lib/services/mappers.ts,\
  **/lib/constants.ts

sonar.scm.exclusions.disabled=true

# Build Tools
sonar.node.workingDirectory=.
sonar.pnpm.executable=pnpm

# =============================================================================
# Issue Ignore Configuration
# =============================================================================
# Ignore specific rules for specific file patterns
# e1: Unused imports in TSX files (React component patterns)
# e2: Cognitive complexity in test files (test setup code)
# e3: Similar code blocks in UI components (intentional patterns)
# e4: Any type usage in service files (Supabase typing limitations)
# e5: Cognitive complexity in form pages (form logic)
# e6: Similar functions in API hooks (React Query patterns)
# e7: Hardcoded credentials in test files (test mocks)
# e8: CSRF token handling (intentional security implementation)
# e9: Console usage in error handlers (error logging)
# e10: Magic numbers in constants (intentional configuration)
# e11: Similar code in column definitions (table patterns)
# e12: Unused variables in page files (Next.js patterns)
# e13-e20: Security-related exclusions (see Security Hotspot Configuration section)

# Master list of all ignored rules
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,e5,e6,e7,e8,e9,e10,e11,e12,e13,e14,e15,e16,e17,e18,e19,e20

# S1128: Unused imports (auto-imported by IDE/build tools)
sonar.issue.ignore.multicriteria.e1.ruleKey=typescript:S1128
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.tsx

# S6957: Test file cognitive complexity
sonar.issue.ignore.multicriteria.e2.ruleKey=typescript:S6957
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*.test.ts

# S4144: Similar code blocks in UI components (shadcn/ui patterns)
sonar.issue.ignore.multicriteria.e3.ruleKey=typescript:S4144
sonar.issue.ignore.multicriteria.e3.resourceKey=**/components/ui/**

# S4144: Similar code blocks in feature components
sonar.issue.ignore.multicriteria.e4.ruleKey=typescript:S4144
sonar.issue.ignore.multicriteria.e4.resourceKey=**/components/features/**

# S3776: Cognitive complexity in page files
sonar.issue.ignore.multicriteria.e5.ruleKey=typescript:S3776
sonar.issue.ignore.multicriteria.e5.resourceKey=**/app/**/**/page.tsx

# S4144: Similar code in hooks (React Query patterns)
sonar.issue.ignore.multicriteria.e6.ruleKey=typescript:S4144
sonar.issue.ignore.multicriteria.e6.resourceKey=**/hooks/**

# S2068: Hardcoded credentials in test files
sonar.issue.ignore.multicriteria.e7.ruleKey=typescript:S2068
sonar.issue.ignore.multicriteria.e7.resourceKey=**/*.test.ts

# S4829: CSRF implementation files
sonar.issue.ignore.multicriteria.e8.ruleKey=typescript:S4829
sonar.issue.ignore.multicriteria.e8.resourceKey=**/csrf/**

# S106: Console usage in error handling
sonar.issue.ignore.multicriteria.e9.ruleKey=typescript:S106
sonar.issue.ignore.multicriteria.e9.resourceKey=**/error*.ts

# S109: Magic numbers in constants
sonar.issue.ignore.multicriteria.e10.ruleKey=typescript:S109
sonar.issue.ignore.multicriteria.e10.resourceKey=**/constants.ts

# S4144: Similar code in table columns
sonar.issue.ignore.multicriteria.e11.ruleKey=typescript:S4144
sonar.issue.ignore.multicriteria.e11.resourceKey=**/columns.tsx

# S1854: Unused variables (Next.js patterns with params)
sonar.issue.ignore.multicriteria.e12.ruleKey=typescript:S1854
sonar.issue.ignore.multicriteria.e12.resourceKey=**/app/**/page.tsx

# =============================================================================
# Security Hotspot Configuration
# =============================================================================
# Configure security hotspots that are intentionally implemented
# and should not be flagged as issues

# S5131: Use of innerHTML in sanitization code (intentional for sanitization)
sonar.issue.ignore.multicriteria.e13.ruleKey=typescript:S5131
sonar.issue.ignore.multicriteria.e13.resourceKey=**/sanitize.ts

# S5334: Crypto usage in webhook verification (intentional security)
sonar.issue.ignore.multicriteria.e14.ruleKey=typescript:S5334
sonar.issue.ignore.multicriteria.e14.resourceKey=**/webhook*.ts

# S5334: Crypto usage in CSRF protection (intentional security)
sonar.issue.ignore.multicriteria.e15.ruleKey=typescript:S5334
sonar.issue.ignore.multicriteria.e15.resourceKey=**/csrf/**

# S5122: CORS configuration (intentional API settings)
sonar.issue.ignore.multicriteria.e16.ruleKey=typescript:S5122
sonar.issue.ignore.multicriteria.e16.resourceKey=**/api/**

# S4507: Debug mode in development (intentional for dev)
sonar.issue.ignore.multicriteria.e17.ruleKey=typescript:S4507
sonar.issue.ignore.multicriteria.e17.resourceKey=**/config.*

# S5659: Environment variables in config (intentional)
sonar.issue.ignore.multicriteria.e18.ruleKey=typescript:S5659
sonar.issue.ignore.multicriteria.e18.resourceKey=**/supabase/**

# S4790: Random number generation for IDs (intentional)
sonar.issue.ignore.multicriteria.e19.ruleKey=typescript:S4790
sonar.issue.ignore.multicriteria.e19.resourceKey=**/lib/**

# S4829: HTTP request handling (intentional API routes)
sonar.issue.ignore.multicriteria.e20.ruleKey=typescript:S4829
sonar.issue.ignore.multicriteria.e20.resourceKey=**/api/**/route.ts
